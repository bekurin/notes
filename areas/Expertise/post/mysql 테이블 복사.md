### 생성 날짜: 2023-10-14T12:03
### 주제: mysql 테이블 복사
---
### 본문:
보통의 migration API들은 많은 양의 데이터를 다루게 되므로 테스트 코드 뿐 아니라 실제로 호출해서 정상적으로 동작하는지 확인하고 싶은 필요가 있는데요.

실제 호출 테스트를 위해서는 현재 테이블의 스냅샷을 만들고, 실패하더라도 문제가 되지 않도록 테이블을 분리할 수 있어야합니다.

관계형 데이터베이스를 사용하면 명령어를 통해 쉽게 테이블을 복사할 수 있는데요.

명령어는 아래와 같습니다.
```
CREATE TABLE <new_table> AS SELECT * FROM <current_table>;
INSERT INTO <new_table> SELECT * FROM <current_table>;
```

위 명령어로 테이블을 복사할 때 유의할 점이 있습니다.

바로 모든 인덱스와 pk, fk 제약조건이 복사, 적용되지 않고 테이블이 생성되기 때문에 잘못하면 pk가 중복된 값, unique index에 걸려야하는 값들이 생성되게 됩니다.

말 그대로 복사만 진행한다. 

---
### 참고문헌
- 
---
### 연결문서
- 

