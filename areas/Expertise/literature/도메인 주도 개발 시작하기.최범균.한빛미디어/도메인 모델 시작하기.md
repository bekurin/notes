### 생성 날짜: 2024-06-07T20:44
### 주제: 도메인 모델 시작하기
---
### 본문:

## 도메인이란?
실생활에서 접할 수 있는 모든 것이 도메인이 될 수 있다는 것을 말해준다. 서점을 예시로 상품 조회, 구매, 결제 , 배송 등이 도메인이 될 수 있다.

모든 소프트웨어에 존재하는 도메인의 기능을 구현하지는 않는다. 대표적으로 pg사, 물류 배송 등이 있다.

## 도메인 전문가와 개발자 간 지식 굥유

> 첫 단추를 잘못 끼우면 모든 단추가 잘못 끼워지듯이 요구사항을 올바르게 이해하지 못하면 요구하지 않은 엉뚱한 기능을 만들게 된다. p.25

이것이 바로 도메인 전문가와 이야기를 자주해야하는 이유로 생각된다. 프로젝트 킥오프 시점에 한번 요구사항을 전달받고 그대로 구현을 하게 되면 대략적인 설계는 가능하겠지만 세부적인 사항까지 설계하지 못하게 될 수 있다.

저자는 도메인 전문가라고 표현하지만 프로젝트에 참여하는 누구든 도메인 전문가가 될 수 있다고 생각한다. 개발자, 디자이너, PM, 사업 부서 등

서로가 긴밀하게 의견을 나눌 수 있다면 유연하고, 편리한 서비스를 사용자에게 제공할 수 있다고 생각하고, 자유로운 의견 교환을 위해서는 탓하지 않는 문화, 처벌하지 않는 문화가 기저에 깔려있어야한다.

## 도메인 모델

도메인 모델은 단순하게 객체, 관계형 데이터베이스의 테이블을 표현하는 것이 아니라 주문의 상태 전이와 같이 주요 서비스의 흐름을 표현할 수 있다.

여기서 저자는 2가지 모델에 대해 소개를 한다.
- 구현 모델: 사용하는 기술에 따라 실제로 구현된 모델 <- 자바, 코틀린 코드
- 개념 모델: 도메인을 이해하기 위해 표현된 모델 <- UML, 다이어그램

📡 도메인 개념을 이해하기 위한 개념 모델을 생성할 때는 모든 도메인을 한 곳에 표현하지 않고, 애그리게이트를 나눠서 덩어리 별로 표현할 수 있도록 한다.

## 도메인 모델 패턴

> 핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해 할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영할 수 있게 된다. p.33

- 도메인 규칙이란 게임에 기본 규칙을 추가하듯이 무조건 지켜야하는 규칙을 말하는 것

📡 데이터의 원천에서 검증 또는 추가 데이터 생성을 진행하는 것이 가장 변경을 적게 가져갈 수 있다.

## 도메인 모델 도출
프로젝트를 진행할 때 도메인 모델은 서비스의 주 축인 된다고 생각한다. 도메인 모델을 도출하는 과정에 대해 저자는 다음과 같이 설명합니다.

> 기획서, 유스케이스, 사용자 스토리와 같은 요구사항과 관련자와의 대화를 통해 도메인을 이해하고 이를 바탕으로 도메인 모델 초안을 만들어야 비로소 코드를 작성할 수 있다. p.35

기획서, 유스케이스, 사용자 스토리가 고정되고, 프로젝트를 진행하는 좋겠지만 이런 경우는 없다고 단언해도 좋을 것 같다. 

설령 운이 정말 좋아 기획, 유스케이스가 고정되어도 도메인 설계는 수차례 변경될 수 있다.

따라서, `개념 모델 -> 구현 모델 -> 피드백 -> 개념 모델` 순서로 피드백 루프를 만들어서 관리하면 좋을 것 같다는 생각을 했다.

📡 소단원의 끝에 저자는 문서화를 강조한다. 어떻게 문서화를 진행하는 것이 좋은 것인가?? B2B 예약 프로세스를 예시로 소개하고, 다른 팀의 사례를 들어보면 좋을 것 같다.

## 엔티티와 벨류

이번 소단원에서는 다음 2가지를 주로 설명을 한다.
### 엔티티와 벨류 타입
- 엔티티: 고유의 식별자를 갖는 객체로 자신의 라이프 사이클을 갖는다. ex. 주문
- 벨류: 고유의 식별자를 갖지 않는 객체로 주로 개념적으로 하나인 값을 표현할 때 사용된다. ex. 주소

> 벨류 타입이 꼭 두 개 이상의 데이터를 가져야하는 것은 아니다. p.48

ex. '돈'을 의미하는 Money 타입을 만들어 사용하면 코드를 이해하는 데 도움이 된다.

일반적으로는 Long, Int, Double, Decimal 등으로 표현하지만 필드가 1개라고 하더라도 Money라는 타입을 만들면 돈을 의미한다는 것을 직관적으로 이해할 수 있고, 추후 돈 계산이 요구사항으로 추가된다면 자연스럽게 해당 클래스에 로직을 추가할 수 있다.

> 밸류 객체의 데이터를 변경할 대는 기존 데이터를 변경하기보다는 변경한 데이터를 갖는 새로운 밸류 객체를 생성하는 방식을 선호한다. p.50

저자가 이후 장에서도 강조하는 것이지만 밸류 객체는 고유 식별자가 존재하는 것이 아니기 때문에 기존 데이터를 수정하는 방식을 채택하는 것보다는 불변으로 만들어야함을 강조한다.
### 도메인 모델에 set 메서드 넣지 않기

도메인 모델에 set 메서드 넣지 않기에서 강조하는 사항은 2가지이다.
1. set, update와 같이 도메인 규칙을 내포하지 못하는 이름 대신에 의미있는 이름을 사용할 수 있도록 한다.
2. public set을 제한하여 도메인 객체가 불완전한 상태로 생성되는 것을 막는다.

## 도메인 용어와 유비쿼터스 언어

> 코드를 작성할 때 도메인에서 사용되는 용어는 매우 중요하다. p.57

매우 공감한다. 이번 프로젝트에서도 이전 프로젝트에서도 서비스 이름을 정하지 않고, 프로젝트를 시작해서 shuttle, chauffeur가 코드에 공존하고, b2b external, fms car가 프로젝트에 공존한다.

도메인 모델 도출과 비슷한 결로 도메인 전문가와 지속적으로 의견을 나눠서 적절한 유비쿼터스 언어를 선정해야하고, 이를 잘 정리해두면 새로 합류하는 팀원이 어렵지 않게 코드에 사용되는 용어와 회의에서 사용되는 용어를 이해할 수 있다고 생각한다.

---
### 참고문헌
- 
---
### 연결문서
- 

