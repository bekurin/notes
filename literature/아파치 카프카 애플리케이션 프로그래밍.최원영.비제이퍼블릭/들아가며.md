### 생성 날짜: 2024-04-03T21:31
### 주제: 들아가며
---
### 본문:

## 아파치 카프카의 탄생
링크드인 사이트의 성장으로 인해 데이터가 폭발적으로 생성되게 되었고, 기존의 아키텍처를 너무 큰 복잡도로 로직을 처리하고 있어 이를 개선하고자 고안해낸 것이 아파치 카프카이다.

다음은 아파치 카프카의 기본 개념을 간략하게 표현한 그림이다.
![[origin_kafka.png]]

> 카프카는 각각의 애플리케이션끼리 연결하여 데이터를 처리하는 것이 아니라 한 곳에 모아 처리할 수 있도록 중앙집중화했다. P.3

카프카는 이벤트를 생성하는 프로듀서, 이벤트를 관리하는 브로커, 이벤트를 소비하는 컨슈머로 각각을 나눌 수 있는 것이 바로 중앙집중화 형식의 이벤트 관리를 사용했기 때문이라고 생각한다.

> 카프카를 중앙에 배치함으로써 소스 애플리케이션과 타깃 애플리케이션 사이의 의존도를 최소화하여 커플링을 완화하였다. p.4

카프카는 데이터 처리를 최적화 해주는 것과 동시에 이벤트 드리븐 형식의 아키텍처를 구성할 수 있게 해준다. 이는 서로 다른 서비스의 이벤트를 비동기 형식으로 처리할 수 있도록 도와주기 때문에 서로 다른 서비스의 의존도를 낮추는 기능을 할 수 있다.

> 상용 환경에서 카프카는 최소 3대 이상의 서버에서 분산 운영하여 프로듀서를 통해 전송받은 데이터를 시스템에 안전하게 기록한다. P.4

서로 다른 지역에서 운행 중이라면 동시에 3대 이상의 지역에서 문제가 발생할 확률은 매우 낮으므로 일반적으로 3대 이상의 서버를 분산하여 운행하면 고가용성을 높게 가져갈 수 있을 것 같다.

> 데이터 묶음 단위로 처리하는 배치 전송을 통해 낮은 지연과 높은 데이터 처리량도 가지게 되었다. P.4

네트워크 비용은 생각보다 높아서 매번 연결하고 데이터를 전송하는 것보다 일정 시간 이벤트를 저장해뒀다가 한번에 보내는 것이 더 효율적일 수 있다.

Q: 데이터 묶음의 단위는 어디서 정의하는 것인지?

## 카프카를 사용해야하는 이유
데이터 웨어하우스를 위한 파이프라인을 구축하기에 안전하고 쉽기 때문에

- 높은 처리량: 묶음 처리로 최소한의 네트워크 비용을 사용한다.
- 확장성: 브로커와 컨슈머를 늘리기만 하는 것으로 손쉽게 처리량을 늘릴 수 있다. 스케일 아웃이 용이
- 영속성: 카프카는 이벤트를 모두 파일 시스템에 기록하기 때문에 의도치 않은 상황으로 서비스가 종료되더라도 복구할 수 있다. (파일 시스템 성능 향상을 위해 페이지 캐쉬 영역을 적극 활용한다)
- 고가용성: 여러 브러커가 운행 중이라면 한번 전송된 데이터는 하나의 브로커에만 저장되는 것이 아니라 다른 브로커에도 저장되게 되고, 이는 특정 브로커가 장애를 일으켜도 다른 브로커가 언제든지 master, reader가 될 수 있다는 것을 의미한다.
카프카를 사용하는 것만으로 위 4가지의 이점을 챙길 수 있다.


---
### 참고문헌
- 
---
### 연결문서
- 

