### 생성 날짜: 2024-04-21T13:11
### 주제: 쿠버네티스에서 머신러닝 실행하기
---
### 본문:

### 머신러닝에서 쿠버네티스 장점
- 유비쿼터스: 문서도 많고, 플러그인, 라이브러리도 많이 있다.
- 규모 확장성: CPU, GPU 리소스를 자유롭게 할당할 수 있다.
- 자율성: 전문 지식 없이도 쿠버네티스 실행 가능하다. <- ??
- 이식성: 쿠버네티스 API를 기바능로 작업하면 어디에서도 머신러닝 모델을 실행할 수 있다.

### 머신러닝 워크플로
1. 데이터셋 준비: 대규모 블록과 객체 스토리지가 필요하다.
2. 머신러닝 알고리즘 개발: 주피터 허브를 많이 사용하는데 이것이 쿠버네티스와 동작이 유사하다.
3. 훈련: 네트워크, 스토리지, CPU, GPU 등 많은 리소스를 사용한다.
4. 서빙: 훈련된 모델을 클라이언트에게 노출시킨다.

### 쿠버네티스 클러스터 관리자를 위한 머신러닝
데이터 과학자 팀에 속한 클러스터 관리자는 제일 먼저 용어에 익숙해져야한다.

### 쿠버네티스에서 모델 훈련
- 머신러닝 훈련에는 많은 CPU, GPU 연산을 필요로 한다.
- 모델 훈련 중간에 하이퍼파라미터 튜닝을 진행하는데 grid map(2차원 배열)에 파라미터를 정의해두고 제일 적합한 파라미터를 지속적으로 찾아갑니다. 변수가 많을 수록 컴퓨팅 리소스도 많이 올라갑니다.

### 쿠버네티스에서 모델 훈련 시작
사전에 모델 훈련 관련 로직을 구현하여 이미지로 만들면 쿠버네티스 내부에서 모델 훈련을 시작할 수 있습니다.

### 쿠버네티스에서 분산 훈련
분산 훈련은 아직 최적화가 일어나지 않아 아키텍처를 잘 고려하여 필요한 경우에만 실시할 수 있도록 합니다.

### 리소스 제약
제한된 시간 안에 모델 훈련이 종료되어야하므로 적재적소에 컴퓨팅 리소스가 할당되어야합니다.

### 특수한 하드웨어
상업용 GPU를 할당해야하는데 관련 플러그인을 설치만 하면 간단하게 GPU를 요청할 수 있습니다.

### 특이성 스케줄링
쿠버네티스는 자신이 알지 못하는 리소스에 대한 결정을 내릴 수 없기 때문에 특수한 하드웨어(상업용 GPU) 리소스를 최대로 할당 받지 못합니다.
- 최대로 할당도 못하지만 일부를 요청할 수도 없다.


### 스토리지
스토리지는 머신러닝 워크플로우에서 가장 중요한 부분입니다. 
- 데이터셋 스토리지 및 훈련 중 워커 노드 간 분산
- 체크포인트 및 모델 저장

워커 노드는 훈련 중간중간마다 체크포인트 정보를 스토리지에 저장해야하고, 모델 훈련 시작 전에 매우 큰 용량을 가진 데이터를 가져올 수 있어야한다.

#### 네트워킹
더 높은 모델 예측도를 위해 기울기를 변경하기도 하는데 이는 하이퍼 파라미터 튜닝과 비슷하게 변수를 변경하여 모델을 다시 학습시키는 것이므로 네트워크 비용이 많이 듭니다.

#### 특수한 프로토콜
분산 훈련을 효율적으로 하기 위해 탄생한 방법으로 CPU와 OS의 개입 없이 GPU 정보를 직접 교환합니다. 
* GPU는 모두 공유하고, CPU와 OS만 나눠진 형태인가?

---
### 참고문헌
- 
---
### 연결문서
- 

