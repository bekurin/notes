## 스터디
- 쿠버네티스 모범 사례
- 도메인 주도 개발 시작하기
- 실용주의 프로그래머
## 프로젝트
- 쇼퍼 정산 프로젝트
	- 배경과 상황
		- 쇼퍼 서비스를 운영하면서 정산을 수기로 진행하고 있었는데. 수기로 진행하다보니 사람의 실수도 잦고 무엇보다도 정산과 검증에 많은 시간을 소요해서 정산 기능을 시스템화 하기로 결정
		- 금액만 계산해서 엑셀 파일로 만들어주면 결제 내역을 수기로 만들어주는 것이었는데 점점 규모가 커지더니 ERP까지 연동하여 버튼 한번만 누르면 정산이 끝나도록 구현했어.
	- 역할
		- 매일매일 운행이 완료된 노선에 대해 단가가 저장될 수 있도록 구현.
		- 차량 고장 등의 이유로 대차가 이뤄지면 대차가 이뤄진 차량으로 정산이 되어야해서 대차 히스토리를 시스템에서 알 수 있도록 차량 계약 번호 자동 관리 시스템 구현.
		- 정규 운행이 아닌 기업의 요청으로 인해 부가적인 비용을 정산에 포함할 수 있도록 엑셀 입출력 기능 구현.
		- SAP 상에 차량이 등록될 수 있도록 배차/대차 시마다 차량 계약 번호 생성/갱신이 이뤄질 수 있도록 시스템화.
		- 정산 확정 처리를 하면 과금 데이터를 생성하여 ERP 매출 인식이 될 수 있도록 시스템화.
	- 스킬
		- kotlin, spring boot 3
	- 액션
	- 결과
		- 정산 전주부터 사업부서에서 자료를 취합하고, 정산 정보를 생성하느라고 많은 시간을 사용했는데. 이 시간을 10시간에서 2시간으로 단축
	- 회고
		- 한번 확정 처리를 하면 정산 데이터를 snapshot을 찍어두고, 수정할 수 없도록 구현하는 것을 중요하게 생각했다.
- 법인 외부 차량 예약
	- 배경과 상황
		- 쏘카 소유의 차량이 아닌 법인 차량이 쏘카 앱 내에서 예약이 가능해야 했다.
		- 쏘카 존은 b2c 예약과 밀접하게 연관되어 있어 사용하지 못하는 수준이라서 가상존 마커 개념을 사용하여 예약이 가능하도록 구현했다.
		- pm 1명, be 2명, fe 2명
	- 역할
		- 가지러 가기 화면에서 가상존 마커가 비즈니스 프로필에 따로 선택적으로 보이도록 구현
		- 차량 리스트 화면에서 차종 기반으로 그룹핑 되지 않은 차량 리스트를 내려받을 수 있도록 구현
	- 스킬
		- kotlin, spring boot 2.7, buf, grpc
	- 액션
	- 결과
	- 회고
		- 쏘카의 정수라고 할 수 있는 예약과 가지러 가기 화면에 대해 많이 이해할 수 있는 시간을 가질 수 있어 좋았다.
		- 배치가 좋아 보이지만 암흑(?) 수정 같은 일이 가능하게 하여 변경에 매우 취약해지는 것 같다. (=적재적소에 잘 사용하자?)
- 카셰어링 레거시 예약 이관 대응
	- 배경과 상황\
		- b2c 카셰어링팀에서 예약 API를 이관하는 과정에서 기업 관련 TC가 빠져 제대로 검증되지 않고, 운영 환경에 배포가 이뤄짐.
		- 이로 인해 다양한 문제를 맞닥뜨리게 되는데.
			- 결제 카드 순서 변경
			- 대표 카드 결제 기업 예약 불가
			- 후불 결제 기업의 개인 카드 결제 가능
			- 법인 예약이 일반 예약과 같이 취급되어 국세청 엑셀 다운로드에 포함 X
	- 역할
		- 기존 대표 카드 결제 기업의 경우 대표 카드가 맨 위에 나오도록 구현되어 있었지만 대표 카드 결제 기업은 대표 카드 이외 다른 모든 카드로 결제할 수 없기 때문에 대표 카드 1개만 내려가도록 수정
		- 비즈니스 플랜 차량과 해당 차량의 점유 정보를 기반으로 예약의 시작/종료 시간이 점유 시간에 포함되는지 계산하여 미비된 예약 건들이 국세청 엑셀 다운로드에 포함될 수 있도록 작업
	- 스킬
	- 액션
	- 결과
	- 회고
		- 쏘카 앱 내에서 결제 카드를 내려주는 로직에 대해 이해할 수 있어 좋았다.
		- b2b일만 처리하다보니 TC의 중요도가 낮다고 생각했는데. 고객 접점이 많을 수록 필수적이라고 생각했다. 
			- QA팀에서 준비될 때까지 기다리는 것 보다 자동화된 테스트 케이스를 돌릴 수 있도록 깃헙 액션 같은거 만들어보는 것도 좋을 것 같다는 생각을 했다.
- 법인 외부 차량 예약 분리
	- 배경과 상황
		- 이전 예약자와 이후 예약자를 보여주고, 예약 중간에 스마트키 권한을 다른 사람에게 넘기고 싶은 요구사항을 구현해야했다.
		- b2c에 제공되고 있던 기능을 완전히 동일하게 사용하고 있었는데. (=우리가 적용하면 다른 사람들도 볼 수 있는 상황) 이는 b2c 기존에서는 말도 안되는 요구사항이라서 근본적으로 예약이 저장되는 공간을 분리하는 것으로 결정했다.
			- 여기서 분리는 예약만 말한다.
	- 역할
		- 예약 CRUD API 구현
		- 예약 동기화 검증 시스템 구현
	- 스킬
		- kotlin, spring boot 3.3, grpc, buf
	- 액션
	- 결과
	- 회고