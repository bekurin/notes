## 24. Spring validation을 사용할 때 LocalDateTime 검증에 유의하라.

### 아무개의 이야기
프로젝트에 spring-validation을 적용하여 검증하는 코들르 최소화 하게 되었는데. 요구사항을 구현하던 도중 LocalDateTime을 검증해야하는 경우가 생겼다... 현재 또는 과거의 값만 검증해야하기에 spring-validation에서 제공하는 PastOrPresent가 최적의 방법으로 생각하고, 적용하여 테스트를 해보는데 현재 시간을 RequestParam을 넘겨주니 계속 검증에 실패하게 되는데...

--- 

현재 또는 과거의 날짜를 비교하는 PastOrPresent의 경우 서버의 시간을 기준으로 검증을 진행하게 되는데 이는 다음과 같은 문제가 있습니다.

`클라이언트: 23/07/16T15:00:00 -> 서버: 23/07/16T:15:00:05
`
위 처럼 클라이언트에서 전송한 시간과 서버에서 검증을 하는 시간 네트워크 지연 등의 이유로 항상 서버의 시간이 미래가 되는 문제가 있어 검증이 잘 되지 않는다.

LocalDate의 경우 시간을 검증하기 때문에 조금 덜 하지만
23/07/16T23:59:59에 요청한 경우 마찬가지로 검증에 실패할 수 있다.

따라서 날짜 관련 validation을 진행할 때에는 위와 같은 문제들을 제대로 인식한 상태에서 적재적소에 활용하는 것이 좋다.



언제나 과거의 시간이 나오게 된다. 비교하는 시점과 변수가 생성되는 시점은 다르기 때문에
- FutureOrPresent
- Future
- Present
- PastOrPresent
- Past


클라이언트 -\> 서버 검증 -\> 항상 실패
23/07/09T15:00:00 -\> 23/07/09T15:00:01 -\> 검증 실패